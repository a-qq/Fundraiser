2021-05-19 17:22:16.539 +02:00 [INF] Configuring web host ()...
2021-05-19 17:22:20.699 +02:00 [INF] Applying migrations ()...
2021-05-19 17:22:21.392 +02:00 [INF] Migrating database associated with context IdentityDbContext
2021-05-19 17:22:24.613 +02:00 [INF] Migrated database associated with context IdentityDbContext
2021-05-19 17:22:24.626 +02:00 [INF] Migrating database associated with context IntegrationEventLogContext
2021-05-19 17:22:24.662 +02:00 [INF] Migrated database associated with context IntegrationEventLogContext
2021-05-19 17:22:24.662 +02:00 [INF] Starting web host ()...
2021-05-19 17:22:24.837 +02:00 [INF] Starting IdentityServer4 version 4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f
2021-05-19 17:22:24.851 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-05-19 17:22:24.856 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-05-19 17:22:25.030 +02:00 [INF] RabbitMQ Client is trying to connect
2021-05-19 18:12:41.829 +02:00 [INF] Configuring web host ()...
2021-05-19 18:12:44.220 +02:00 [INF] Applying migrations ()...
2021-05-19 18:12:44.734 +02:00 [INF] Migrating database associated with context IdentityDbContext
2021-05-19 18:12:48.469 +02:00 [INF] Migrated database associated with context IdentityDbContext
2021-05-19 18:12:48.770 +02:00 [INF] Migrating database associated with context IntegrationEventLogContext
2021-05-19 18:12:48.864 +02:00 [INF] Migrated database associated with context IntegrationEventLogContext
2021-05-19 18:12:48.864 +02:00 [INF] Starting web host ()...
2021-05-19 18:12:49.046 +02:00 [INF] Starting IdentityServer4 version 4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f
2021-05-19 18:12:49.062 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-05-19 18:12:49.069 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-05-19 18:12:49.335 +02:00 [INF] RabbitMQ Client is trying to connect
2021-05-19 18:12:49.587 +02:00 [INF] RabbitMQ Client acquired a persistent connection to 'localhost' and is subscribed to failure events
2021-05-19 18:12:49.915 +02:00 [INF] Subscribing to event FormTutorAssignedIntegrationEvent with IIntegrationEventHandler<FormTutorAssignedIntegrationEvent>
2021-05-19 18:12:49.956 +02:00 [INF] Subscribing to event FormTutorDivestedIntegrationEvent with IIntegrationEventHandler<FormTutorDivestedIntegrationEvent>
2021-05-19 18:12:49.989 +02:00 [INF] Subscribing to event FormTutorsDivestedIntegrationEvent with IIntegrationEventHandler<FormTutorsDivestedIntegrationEvent>
2021-05-19 18:12:50.000 +02:00 [INF] Subscribing to event HeadmasterDivestedIntegrationEvent with IIntegrationEventHandler<HeadmasterDivestedIntegrationEvent>
2021-05-19 18:12:50.009 +02:00 [INF] Subscribing to event HeadmasterPromotedIntegrationEvent with IIntegrationEventHandler<HeadmasterPromotedIntegrationEvent>
2021-05-19 18:12:50.020 +02:00 [INF] Subscribing to event MemberArchivedIntegrationEvent with IIntegrationEventHandler<MemberArchivedIntegrationEvent>
2021-05-19 18:12:50.029 +02:00 [INF] Subscribing to event MemberEnrolledIntegrationEvent with IIntegrationEventHandler<MemberEnrolledIntegrationEvent>
2021-05-19 18:12:50.171 +02:00 [INF] Subscribing to event MemberExpelledIntegrationEvent with IIntegrationEventHandler<MemberExpelledIntegrationEvent>
2021-05-19 18:12:50.288 +02:00 [INF] Subscribing to event MemberRestoredIntegrationEvent with IIntegrationEventHandler<MemberRestoredIntegrationEvent>
2021-05-19 18:12:50.330 +02:00 [INF] Subscribing to event MembersArchivedIntegrationEvent with IIntegrationEventHandler<MembersArchivedIntegrationEvent>
2021-05-19 18:12:50.371 +02:00 [INF] Subscribing to event MembersEnrolledIntegrationEvent with IIntegrationEventHandler<MembersEnrolledIntegrationEvent>
2021-05-19 18:12:50.442 +02:00 [INF] Subscribing to event SchoolRemovedIntegrationEvent with IIntegrationEventHandler<SchoolRemovedIntegrationEvent>
2021-05-19 18:12:50.478 +02:00 [INF] Subscribing to event StudentAssignedIntegrationEvent with IIntegrationEventHandler<StudentAssignedIntegrationEvent>
2021-05-19 18:12:50.510 +02:00 [INF] Subscribing to event StudentDisenrolledIntegrationEvent with IIntegrationEventHandler<StudentDisenrolledIntegrationEvent>
2021-05-19 18:12:50.538 +02:00 [INF] Subscribing to event StudentsDisenrolledIntegrationEvent with IIntegrationEventHandler<StudentsDisenrolledIntegrationEvent>
2021-05-19 18:12:50.572 +02:00 [INF] Subscribing to event StudentsAssignedIntegrationEvent with IIntegrationEventHandler<StudentsAssignedIntegrationEvent>
2021-05-19 18:12:50.611 +02:00 [INF] Subscribing to event TreasurerDivestedIntegrationEvent with IIntegrationEventHandler<TreasurerDivestedIntegrationEvent>
2021-05-19 18:12:50.646 +02:00 [INF] Subscribing to event TreasurersDivestedIntegrationEvent with IIntegrationEventHandler<TreasurersDivestedIntegrationEvent>
2021-05-19 18:12:50.673 +02:00 [INF] Subscribing to event TreasurerPromotedIntegrationEvent with IIntegrationEventHandler<TreasurerPromotedIntegrationEvent>
2021-05-19 18:12:50.699 +02:00 [INF] Subscribing to event PasswordResetRequestedIntegrationEvent with IIntegrationEventHandler<PasswordResetRequestedIntegrationEvent>
2021-05-19 18:12:50.796 +02:00 [INF] Subscribing to event UserRegistrationRequestedIntegrationEvent with IIntegrationEventHandler<UserRegistrationRequestedIntegrationEvent>
2021-05-19 18:13:01.418 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-05-19 18:13:01.541 +02:00 [INF] Showing login: User is not authenticated
2021-05-19 18:13:09.457 +02:00 [INF] ----- Handling user request LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-05-19 18:13:09.495 +02:00 [INF] ----- Begin transaction "bd8eaa4b-caad-4da9-a627-1f57b15bb3d7" for LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-05-19 18:13:10.138 +02:00 [INF] ----- Request LoginCommand failed - error(s): Invalid email or password!
2021-05-19 18:13:15.997 +02:00 [INF] ----- Handling user request LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-05-19 18:13:15.999 +02:00 [INF] ----- Begin transaction "baa74095-1bc9-46e4-b470-57520500d948" for LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-05-19 18:13:16.020 +02:00 [INF] ----- Commit transaction "baa74095-1bc9-46e4-b470-57520500d948" for LoginCommand
2021-05-19 18:13:16.094 +02:00 [INF] ----- Request LoginCommand handled successfully - response: {"Subject":"3f0b0a5f-7aa6-46f4-9247-3ef9a9df2407","Email":"robert_olech@o2.pl","$type":"UserDto"}
2021-05-19 18:13:16.132 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-05-19 18:13:16.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-05-19 18:13:16.638 +02:00 [INF] Token request validation success, {"ClientId":"fundraiserapi_swagger","ClientName":"Backend.API - Swagger","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****00A3","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"D51AB8E0CFD2554FF171A76B34F63DA7909F1F7CA3E8CA4D62B2A6E2C96F00A3","client_id":"fundraiserapi_swagger","redirect_uri":"https://localhost:44307/swagger/oauth2-redirect.html","code_verifier":"yJ6GESOBhaCDwpB5FPEIc5Qxr_NRcFinhF60G3mzgYE"},"$type":"TokenRequestValidationLog"}
2021-05-19 18:13:54.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-05-19 18:13:54.742 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-05-19 18:14:03.907 +02:00 [INF] ----- Handling integration event: "0f3e7c72-a910-4a59-9d6c-54072a948bf4" at IDP.Application - ({"MemberId":"0e6c654b-d428-4128-816e-caf352324c01","Email":"halexa6703@mxcdd.com","Role":"Headmaster","SchoolId":"d4e6058b-302e-42ea-aa2f-994a66c374fc","FirstName":"Adam","LastName":"Nowak","Gender":"Male","Id":"0f3e7c72-a910-4a59-9d6c-54072a948bf4","CreationDate":"2021-05-19T16:13:56.4667378Z","$type":"MemberEnrolledIntegrationEvent"})
2021-05-19 18:14:03.980 +02:00 [INF] ----- Validating command IdentifiedCommand<AddUserCommand>
2021-05-19 18:14:03.990 +02:00 [INF] ----- Begin transaction "e15d1d1e-1c48-4cc5-8190-640755b020e8" for IdentifiedCommand<AddUserCommand> ({"Command":{"Email":"halexa6703@mxcdd.com","Subject":"0e6c654b-d428-4128-816e-caf352324c01","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Headmaster","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Nowak","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"},"Id":"0f3e7c72-a910-4a59-9d6c-54072a948bf4","$type":"IdentifiedCommand`1"})
2021-05-19 18:14:04.250 +02:00 [INF] ----- Sending idempotent command: AddUserCommand - Id: "0f3e7c72-a910-4a59-9d6c-54072a948bf4" ({"Email":"halexa6703@mxcdd.com","Subject":"0e6c654b-d428-4128-816e-caf352324c01","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Headmaster","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Nowak","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:14:04.280 +02:00 [INF] ----- Handling internal command AddUserCommand ({"Email":"halexa6703@mxcdd.com","Subject":"0e6c654b-d428-4128-816e-caf352324c01","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Headmaster","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Nowak","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:14:04.281 +02:00 [INF] ----- Validating command AddUserCommand
2021-05-19 18:14:04.506 +02:00 [INF] Publishing domain event. Event - UserRegistrationRequestedDomainEvent
2021-05-19 18:14:04.515 +02:00 [INF] ----- Enqueuing integration event "f2c7041d-a794-4dbc-a89a-80f172bff76c" to repository ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","Id":"f2c7041d-a794-4dbc-a89a-80f172bff76c","CreationDate":"2021-05-19T16:14:04.5147420Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:14:04.760 +02:00 [INF] ----- Internal command AddUserCommand handled successfully!
2021-05-19 18:14:04.760 +02:00 [INF] ----- Idempotent command succeeded - AddUserCommand - Id: "0f3e7c72-a910-4a59-9d6c-54072a948bf4" ({"Email":"halexa6703@mxcdd.com","Subject":"0e6c654b-d428-4128-816e-caf352324c01","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Headmaster","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Nowak","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:14:04.761 +02:00 [INF] ----- Commit transaction "e15d1d1e-1c48-4cc5-8190-640755b020e8" for IdentifiedCommand<AddUserCommand>
2021-05-19 18:14:04.772 +02:00 [INF] ----- Publishing integration event: "f2c7041d-a794-4dbc-a89a-80f172bff76c" from IDP.Application - ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","Id":"f2c7041d-a794-4dbc-a89a-80f172bff76c","CreationDate":"2021-05-19T16:14:04.5147420Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:14:04.823 +02:00 [INF] ----- Handling integration event: "f2c7041d-a794-4dbc-a89a-80f172bff76c" at IDP.Application - ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","Id":"f2c7041d-a794-4dbc-a89a-80f172bff76c","CreationDate":"2021-05-19T16:14:04.5147420Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:14:04.836 +02:00 [INF] ----- Validating command IdentifiedCommand<SendCompleteRegistrationEmailCommand>
2021-05-19 18:14:04.837 +02:00 [INF] ----- Begin transaction "e856b7a5-68e0-455b-a8cb-2de442bb3aab" for IdentifiedCommand<SendCompleteRegistrationEmailCommand> ({"Command":{"Subject":"0e6c654b-d428-4128-816e-caf352324c01","$type":"SendCompleteRegistrationEmailCommand"},"Id":"f2c7041d-a794-4dbc-a89a-80f172bff76c","$type":"IdentifiedCommand`1"})
2021-05-19 18:14:04.846 +02:00 [INF] ----- Sending idempotent command: SendCompleteRegistrationEmailCommand - Id: "f2c7041d-a794-4dbc-a89a-80f172bff76c" ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:14:04.853 +02:00 [INF] ----- Handling internal command SendCompleteRegistrationEmailCommand ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:14:04.853 +02:00 [INF] ----- Validating command SendCompleteRegistrationEmailCommand
2021-05-19 18:14:07.250 +02:00 [INF] ----- Internal command SendCompleteRegistrationEmailCommand handled successfully!
2021-05-19 18:14:07.251 +02:00 [INF] ----- Idempotent command succeeded - SendCompleteRegistrationEmailCommand - Id: "f2c7041d-a794-4dbc-a89a-80f172bff76c" ({"Subject":"0e6c654b-d428-4128-816e-caf352324c01","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:14:07.251 +02:00 [INF] ----- Commit transaction "e856b7a5-68e0-455b-a8cb-2de442bb3aab" for IdentifiedCommand<SendCompleteRegistrationEmailCommand>
2021-05-19 18:15:49.196 +02:00 [INF] ----- Handling integration event: "f38f8e01-2aa8-411e-a7a9-ea3a35aabcaf" at IDP.Application - ({"MemberId":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Email":"qgy61018@zwoho.com","Role":"Student","SchoolId":"d4e6058b-302e-42ea-aa2f-994a66c374fc","FirstName":"Adam","LastName":"Kowalski","Gender":"Male","Id":"f38f8e01-2aa8-411e-a7a9-ea3a35aabcaf","CreationDate":"2021-05-19T16:15:49.1653174Z","$type":"MemberEnrolledIntegrationEvent"})
2021-05-19 18:15:49.214 +02:00 [INF] ----- Validating command IdentifiedCommand<AddUserCommand>
2021-05-19 18:15:49.217 +02:00 [INF] ----- Begin transaction "1ddbc5d6-2864-4022-b61c-c93b94429432" for IdentifiedCommand<AddUserCommand> ({"Command":{"Email":"qgy61018@zwoho.com","Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Student","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Kowalski","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"},"Id":"f38f8e01-2aa8-411e-a7a9-ea3a35aabcaf","$type":"IdentifiedCommand`1"})
2021-05-19 18:15:49.270 +02:00 [INF] ----- Sending idempotent command: AddUserCommand - Id: "f38f8e01-2aa8-411e-a7a9-ea3a35aabcaf" ({"Email":"qgy61018@zwoho.com","Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Student","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Kowalski","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:15:49.280 +02:00 [INF] ----- Handling internal command AddUserCommand ({"Email":"qgy61018@zwoho.com","Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Student","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Kowalski","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:15:49.280 +02:00 [INF] ----- Validating command AddUserCommand
2021-05-19 18:15:49.287 +02:00 [INF] Publishing domain event. Event - UserRegistrationRequestedDomainEvent
2021-05-19 18:15:49.289 +02:00 [INF] ----- Enqueuing integration event "74e1576a-9d18-4256-8da4-58377d0a0368" to repository ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Id":"74e1576a-9d18-4256-8da4-58377d0a0368","CreationDate":"2021-05-19T16:15:49.2893565Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:15:49.359 +02:00 [INF] ----- Internal command AddUserCommand handled successfully!
2021-05-19 18:15:49.360 +02:00 [INF] ----- Idempotent command succeeded - AddUserCommand - Id: "f38f8e01-2aa8-411e-a7a9-ea3a35aabcaf" ({"Email":"qgy61018@zwoho.com","Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","HoursToExpire":null,"Claims":[{"Type":"role","Value":"Student","$type":"ClaimInsertModel"},{"Type":"school_id","Value":"d4e6058b-302e-42ea-aa2f-994a66c374fc","$type":"ClaimInsertModel"},{"Type":"given_name","Value":"Adam","$type":"ClaimInsertModel"},{"Type":"family_name","Value":"Kowalski","$type":"ClaimInsertModel"},{"Type":"gender","Value":"Male","$type":"ClaimInsertModel"}],"$type":"AddUserCommand"})
2021-05-19 18:15:49.360 +02:00 [INF] ----- Commit transaction "1ddbc5d6-2864-4022-b61c-c93b94429432" for IdentifiedCommand<AddUserCommand>
2021-05-19 18:15:49.365 +02:00 [INF] ----- Publishing integration event: "74e1576a-9d18-4256-8da4-58377d0a0368" from IDP.Application - ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Id":"74e1576a-9d18-4256-8da4-58377d0a0368","CreationDate":"2021-05-19T16:15:49.2893565Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:15:49.384 +02:00 [INF] ----- Handling integration event: "74e1576a-9d18-4256-8da4-58377d0a0368" at IDP.Application - ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Id":"74e1576a-9d18-4256-8da4-58377d0a0368","CreationDate":"2021-05-19T16:15:49.2893565Z","$type":"UserRegistrationRequestedIntegrationEvent"})
2021-05-19 18:15:49.398 +02:00 [INF] ----- Validating command IdentifiedCommand<SendCompleteRegistrationEmailCommand>
2021-05-19 18:15:49.398 +02:00 [INF] ----- Begin transaction "966df5c7-6bf6-438a-b4de-bb797a38fb17" for IdentifiedCommand<SendCompleteRegistrationEmailCommand> ({"Command":{"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","$type":"SendCompleteRegistrationEmailCommand"},"Id":"74e1576a-9d18-4256-8da4-58377d0a0368","$type":"IdentifiedCommand`1"})
2021-05-19 18:15:49.405 +02:00 [INF] ----- Sending idempotent command: SendCompleteRegistrationEmailCommand - Id: "74e1576a-9d18-4256-8da4-58377d0a0368" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:15:49.406 +02:00 [INF] ----- Handling internal command SendCompleteRegistrationEmailCommand ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:15:49.406 +02:00 [INF] ----- Validating command SendCompleteRegistrationEmailCommand
2021-05-19 18:15:50.812 +02:00 [INF] ----- Internal command SendCompleteRegistrationEmailCommand handled successfully!
2021-05-19 18:15:50.813 +02:00 [INF] ----- Idempotent command succeeded - SendCompleteRegistrationEmailCommand - Id: "74e1576a-9d18-4256-8da4-58377d0a0368" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","$type":"SendCompleteRegistrationEmailCommand"})
2021-05-19 18:15:50.813 +02:00 [INF] ----- Commit transaction "966df5c7-6bf6-438a-b4de-bb797a38fb17" for IdentifiedCommand<SendCompleteRegistrationEmailCommand>
2021-05-19 18:18:01.409 +02:00 [INF] ----- Handling integration event: "db1f8279-04e6-4d25-b8de-c101d885a6fb" at IDP.Application - ({"StudentId":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","GroupId":"2187da54-4c8a-45cb-9cc6-f8be2404601e","Id":"db1f8279-04e6-4d25-b8de-c101d885a6fb","CreationDate":"2021-05-19T16:18:01.3412548Z","$type":"StudentAssignedIntegrationEvent"})
2021-05-19 18:18:01.443 +02:00 [INF] ----- Validating command IdentifiedCommand<AddClaimsToUserCommand>
2021-05-19 18:18:01.449 +02:00 [INF] ----- Begin transaction "23b5f15a-6bca-4442-af1c-e1d49495ca85" for IdentifiedCommand<AddClaimsToUserCommand> ({"Command":{"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"group_id","Value":"2187da54-4c8a-45cb-9cc6-f8be2404601e","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"},"Id":"db1f8279-04e6-4d25-b8de-c101d885a6fb","$type":"IdentifiedCommand`1"})
2021-05-19 18:18:01.480 +02:00 [INF] ----- Sending idempotent command: AddClaimsToUserCommand - Id: "db1f8279-04e6-4d25-b8de-c101d885a6fb" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"group_id","Value":"2187da54-4c8a-45cb-9cc6-f8be2404601e","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:01.488 +02:00 [INF] ----- Handling internal command AddClaimsToUserCommand ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"group_id","Value":"2187da54-4c8a-45cb-9cc6-f8be2404601e","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:01.488 +02:00 [INF] ----- Validating command AddClaimsToUserCommand
2021-05-19 18:18:01.506 +02:00 [INF] ----- Internal command AddClaimsToUserCommand handled successfully!
2021-05-19 18:18:01.506 +02:00 [INF] ----- Idempotent command succeeded - AddClaimsToUserCommand - Id: "db1f8279-04e6-4d25-b8de-c101d885a6fb" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"group_id","Value":"2187da54-4c8a-45cb-9cc6-f8be2404601e","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:01.506 +02:00 [INF] ----- Commit transaction "23b5f15a-6bca-4442-af1c-e1d49495ca85" for IdentifiedCommand<AddClaimsToUserCommand>
2021-05-19 18:18:47.352 +02:00 [INF] ----- Handling integration event: "77b63a6a-5324-4151-b40f-755772d0afce" at IDP.Application - ({"StudentId":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","AssignedRole":"Treasurer","Id":"77b63a6a-5324-4151-b40f-755772d0afce","CreationDate":"2021-05-19T16:18:47.2715083Z","$type":"TreasurerPromotedIntegrationEvent"})
2021-05-19 18:18:47.363 +02:00 [INF] ----- Validating command IdentifiedCommand<AddClaimsToUserCommand>
2021-05-19 18:18:47.365 +02:00 [INF] ----- Begin transaction "1c3e6293-6fbf-4b02-b687-39079285740a" for IdentifiedCommand<AddClaimsToUserCommand> ({"Command":{"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"role","Value":"Treasurer","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"},"Id":"77b63a6a-5324-4151-b40f-755772d0afce","$type":"IdentifiedCommand`1"})
2021-05-19 18:18:47.376 +02:00 [INF] ----- Sending idempotent command: AddClaimsToUserCommand - Id: "77b63a6a-5324-4151-b40f-755772d0afce" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"role","Value":"Treasurer","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:47.379 +02:00 [INF] ----- Handling internal command AddClaimsToUserCommand ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"role","Value":"Treasurer","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:47.379 +02:00 [INF] ----- Validating command AddClaimsToUserCommand
2021-05-19 18:18:47.391 +02:00 [INF] ----- Internal command AddClaimsToUserCommand handled successfully!
2021-05-19 18:18:47.391 +02:00 [INF] ----- Idempotent command succeeded - AddClaimsToUserCommand - Id: "77b63a6a-5324-4151-b40f-755772d0afce" ({"Subject":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","Claims":[{"Type":"role","Value":"Treasurer","$type":"ClaimInsertModel"}],"$type":"AddClaimsToUserCommand"})
2021-05-19 18:18:47.391 +02:00 [INF] ----- Commit transaction "1c3e6293-6fbf-4b02-b687-39079285740a" for IdentifiedCommand<AddClaimsToUserCommand>
2021-05-19 18:19:16.507 +02:00 [ERR] Dead lettering RabbitMQ message: "{"StudentId":"bd2015cd-aae0-4f2c-9542-424ddbf639e8","RemovedRole":"Treasurer","Id":"0a98dd4c-61a7-4a87-99dd-fbdee5827e5d","CreationDate":"2021-05-19T16:19:16.2219156Z"}". Reason: Unable to find a constructor to use for type IDP.Application.IntegrationEvents.Events.StudentDisenrolledIntegrationEvent. A class should either have a default constructor, one constructor with arguments or a constructor marked with the JsonConstructor attribute. Path 'StudentId', line 1, position 13.
Newtonsoft.Json.JsonSerializationException: Unable to find a constructor to use for type IDP.Application.IntegrationEvents.Events.StudentDisenrolledIntegrationEvent. A class should either have a default constructor, one constructor with arguments or a constructor marked with the JsonConstructor attribute. Path 'StudentId', line 1, position 13.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateNewObject(JsonReader reader, JsonObjectContract objectContract, JsonProperty containerMember, JsonProperty containerProperty, String id, Boolean& createdFromNonDefaultCreator)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type)
   at SharedKernel.Infrastructure.Concretes.EventBus.RabbitMQ.EventBusRabbitMq.DeserializeEventObject(String eventName, String message, Type eventType, String dlxReason) in C:\Users\aqq\source\repos\FundraiserBackend\src\SharedKernel\SharedKernel.Infrastructure\Concretes\EventBus\RabbitMQ\EventBusRabbitMq.cs:line 353
   at SharedKernel.Infrastructure.Concretes.EventBus.RabbitMQ.EventBusRabbitMq.HandleTypedSubscription(String eventName, String message, ILifetimeScope scope, SubscriptionInfo subscription, String dlxReason) in C:\Users\aqq\source\repos\FundraiserBackend\src\SharedKernel\SharedKernel.Infrastructure\Concretes\EventBus\RabbitMQ\EventBusRabbitMq.cs:line 340
   at SharedKernel.Infrastructure.Concretes.EventBus.RabbitMQ.EventBusRabbitMq.ProcessEvent(String eventName, String message, String dlxReason) in C:\Users\aqq\source\repos\FundraiserBackend\src\SharedKernel\SharedKernel.Infrastructure\Concretes\EventBus\RabbitMQ\EventBusRabbitMq.cs:line 311
   at SharedKernel.Infrastructure.Concretes.EventBus.RabbitMQ.EventBusRabbitMq.ProcessEvent(String eventName, String message, String dlxReason) in C:\Users\aqq\source\repos\FundraiserBackend\src\SharedKernel\SharedKernel.Infrastructure\Concretes\EventBus\RabbitMQ\EventBusRabbitMq.cs:line 317
   at SharedKernel.Infrastructure.Concretes.EventBus.RabbitMQ.EventBusRabbitMq.Consumer_Received(Object sender, BasicDeliverEventArgs eventArgs) in C:\Users\aqq\source\repos\FundraiserBackend\src\SharedKernel\SharedKernel.Infrastructure\Concretes\EventBus\RabbitMQ\EventBusRabbitMq.cs:line 225
