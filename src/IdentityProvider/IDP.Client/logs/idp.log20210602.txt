2021-06-02 23:36:20.475 +02:00 [INF] Configuring web host ()...
2021-06-02 23:36:26.289 +02:00 [INF] Applying migrations ()...
2021-06-02 23:36:26.658 +02:00 [INF] Migrating database associated with context IdentityDbContext
2021-06-02 23:36:29.660 +02:00 [INF] Migrated database associated with context IdentityDbContext
2021-06-02 23:36:29.674 +02:00 [INF] Migrating database associated with context IntegrationEventLogContext
2021-06-02 23:36:29.796 +02:00 [INF] Migrated database associated with context IntegrationEventLogContext
2021-06-02 23:36:29.797 +02:00 [INF] Starting web host ()...
2021-06-02 23:36:30.009 +02:00 [INF] Starting IdentityServer4 version 4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f
2021-06-02 23:36:30.024 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-06-02 23:36:30.030 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-06-02 23:36:30.390 +02:00 [INF] RabbitMQ Client is trying to connect
2021-06-02 23:36:30.542 +02:00 [INF] RabbitMQ Client acquired a persistent connection to 'localhost' and is subscribed to failure events
2021-06-02 23:36:30.592 +02:00 [INF] Subscribing to event FormTutorAssignedIntegrationEvent with IIntegrationEventHandler<FormTutorAssignedIntegrationEvent>
2021-06-02 23:36:30.607 +02:00 [INF] Subscribing to event FormTutorDivestedIntegrationEvent with IIntegrationEventHandler<FormTutorDivestedIntegrationEvent>
2021-06-02 23:36:30.630 +02:00 [INF] Subscribing to event FormTutorsDivestedIntegrationEvent with IIntegrationEventHandler<FormTutorsDivestedIntegrationEvent>
2021-06-02 23:36:30.639 +02:00 [INF] Subscribing to event HeadmasterDivestedIntegrationEvent with IIntegrationEventHandler<HeadmasterDivestedIntegrationEvent>
2021-06-02 23:36:30.659 +02:00 [INF] Subscribing to event HeadmasterPromotedIntegrationEvent with IIntegrationEventHandler<HeadmasterPromotedIntegrationEvent>
2021-06-02 23:36:30.750 +02:00 [INF] Subscribing to event MemberArchivedIntegrationEvent with IIntegrationEventHandler<MemberArchivedIntegrationEvent>
2021-06-02 23:36:30.790 +02:00 [INF] Subscribing to event MemberEnrolledIntegrationEvent with IIntegrationEventHandler<MemberEnrolledIntegrationEvent>
2021-06-02 23:36:30.809 +02:00 [INF] Subscribing to event MemberExpelledIntegrationEvent with IIntegrationEventHandler<MemberExpelledIntegrationEvent>
2021-06-02 23:36:30.821 +02:00 [INF] Subscribing to event MemberRestoredIntegrationEvent with IIntegrationEventHandler<MemberRestoredIntegrationEvent>
2021-06-02 23:36:30.870 +02:00 [INF] Subscribing to event MembersArchivedIntegrationEvent with IIntegrationEventHandler<MembersArchivedIntegrationEvent>
2021-06-02 23:36:30.879 +02:00 [INF] Subscribing to event MembersEnrolledIntegrationEvent with IIntegrationEventHandler<MembersEnrolledIntegrationEvent>
2021-06-02 23:36:30.889 +02:00 [INF] Subscribing to event SchoolRemovedIntegrationEvent with IIntegrationEventHandler<SchoolRemovedIntegrationEvent>
2021-06-02 23:36:30.897 +02:00 [INF] Subscribing to event StudentAssignedIntegrationEvent with IIntegrationEventHandler<StudentAssignedIntegrationEvent>
2021-06-02 23:36:30.905 +02:00 [INF] Subscribing to event StudentDisenrolledIntegrationEvent with IIntegrationEventHandler<StudentDisenrolledIntegrationEvent>
2021-06-02 23:36:30.914 +02:00 [INF] Subscribing to event StudentsDisenrolledIntegrationEvent with IIntegrationEventHandler<StudentsDisenrolledIntegrationEvent>
2021-06-02 23:36:30.926 +02:00 [INF] Subscribing to event StudentsAssignedIntegrationEvent with IIntegrationEventHandler<StudentsAssignedIntegrationEvent>
2021-06-02 23:36:30.983 +02:00 [INF] Subscribing to event TreasurerDivestedIntegrationEvent with IIntegrationEventHandler<TreasurerDivestedIntegrationEvent>
2021-06-02 23:36:31.005 +02:00 [INF] Subscribing to event TreasurersDivestedIntegrationEvent with IIntegrationEventHandler<TreasurersDivestedIntegrationEvent>
2021-06-02 23:36:31.023 +02:00 [INF] Subscribing to event TreasurerPromotedIntegrationEvent with IIntegrationEventHandler<TreasurerPromotedIntegrationEvent>
2021-06-02 23:36:31.050 +02:00 [INF] Subscribing to event PasswordResetRequestedIntegrationEvent with IIntegrationEventHandler<PasswordResetRequestedIntegrationEvent>
2021-06-02 23:36:31.135 +02:00 [INF] Subscribing to event UserRegistrationRequestedIntegrationEvent with IIntegrationEventHandler<UserRegistrationRequestedIntegrationEvent>
2021-06-02 23:38:01.032 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-02 23:38:01.137 +02:00 [INF] Showing login: User is not authenticated
2021-06-02 23:38:08.479 +02:00 [INF] ----- Handling user request LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-06-02 23:38:08.530 +02:00 [INF] ----- Begin transaction "ed8f9e65-e83c-43a4-8939-eb5237f5fb1d" for LoginCommand ({"Email":"robert_olech@o2.pl","$type":"LoginCommand"})
2021-06-02 23:38:09.211 +02:00 [INF] ----- Commit transaction "ed8f9e65-e83c-43a4-8939-eb5237f5fb1d" for LoginCommand
2021-06-02 23:38:09.320 +02:00 [INF] ----- Request LoginCommand handled successfully - response: {"Subject":"3f0b0a5f-7aa6-46f4-9247-3ef9a9df2407","Email":"robert_olech@o2.pl","$type":"UserDto"}
2021-06-02 23:38:09.379 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-06-02 23:38:09.403 +02:00 [INF] ----- Validating command IsUserActiveQuery
2021-06-02 23:38:09.405 +02:00 [INF] ----- Handling internal query IsUserActiveQuery ({"Subject":"3f0b0a5f-7aa6-46f4-9247-3ef9a9df2407","$type":"IsUserActiveQuery"})
2021-06-02 23:38:09.430 +02:00 [INF] ----- Internal query IsUserActiveQuery handled successfully - response: true
2021-06-02 23:38:09.949 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-06-02 23:38:10.009 +02:00 [INF] ----- Validating command IsUserActiveQuery
2021-06-02 23:38:10.010 +02:00 [INF] ----- Handling internal query IsUserActiveQuery ({"Subject":"3f0b0a5f-7aa6-46f4-9247-3ef9a9df2407","$type":"IsUserActiveQuery"})
2021-06-02 23:38:10.012 +02:00 [INF] ----- Internal query IsUserActiveQuery handled successfully - response: true
2021-06-02 23:38:10.031 +02:00 [INF] Token request validation success, {"ClientId":"fundraiserapi_swagger","ClientName":"Backend.API - Swagger","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****6136","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"3DB756F8F0A969DEF222CEED4E6926DF2B75DDA1F4C76DA44BE3685D83B56136","client_id":"fundraiserapi_swagger","redirect_uri":"https://localhost:44307/swagger/oauth2-redirect.html","code_verifier":"boXXG_48FbGtyHh_2d98qzfEXiav7yBCkbXi9Dz4ghA"},"$type":"TokenRequestValidationLog"}
2021-06-02 23:38:10.075 +02:00 [INF] ----- Validating command GetUserClaimsQuery
2021-06-02 23:38:10.077 +02:00 [INF] ----- Handling internal query GetUserClaimsQuery ({"Subject":"3f0b0a5f-7aa6-46f4-9247-3ef9a9df2407","$type":"GetUserClaimsQuery"})
2021-06-02 23:38:10.109 +02:00 [INF] ----- Internal query GetUserClaimsQuery handled successfully - response: [{"Type":"role","Value":"Administrator","$type":"ClaimDto"}]
2021-06-02 23:38:36.829 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-02 23:38:37.120 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
